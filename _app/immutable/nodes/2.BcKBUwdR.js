import{c as Cn,l as On,m as xn,a as p,d as R,f as z,o as qe,j as An}from"../chunks/W4OKvgJ1.js";import{w as bt,o as en,a as Dn}from"../chunks/sST61MHv.js";import{a as ht,H as tn,aW as nn,S as st,h as pe,a0 as sn,I as gt,l as n,ap as Pn,af as zn,K as Ln,U as Ht,a4 as ut,e as Be,J as Un,a9 as Rn,R as Ft,c as jn,aX as Le,b as xt,s as Hn,C as qt,ag as A,a7 as Dt,aM as Fn,aY as qn,aZ as Vn,a_ as Bn,r as an,p as rn,a$ as Ct,F as Jn,a2 as Gn,b0 as Wn,a6 as Yn,d as Kn,b1 as Zn,X as Xn,b2 as Qn,G as es,ah as ts,t as Ie,x as Me,A as I,y as f,i as q,n as P,z as u,v as D,aJ as me,b3 as on,b4 as U,b5 as Pe,w as Y,ai as N,aH as Vt,an as ns,T as ss}from"../chunks/DCd_uAEE.js";import{s as x}from"../chunks/mw6dDeEP.js";import{l as ee,p as L,s as re,i as V,a as Te,b as ue,c as ln}from"../chunks/CUWMNtGJ.js";import{a as Bt,b as De,s as vt,c as as,d as rs}from"../chunks/CCIW6Yut.js";import"../chunks/DNsPaE8R.js";import{i as Ne}from"../chunks/BQsvaV8x.js";import{B as is}from"../chunks/-W29c7Qh.js";function Je(s,e){return e}function os(s,e,a){for(var r=[],i=e.length,o,t=e.length,l=0;l<i;l++){let v=e[l];rn(v,()=>{if(o){if(o.pending.delete(v),o.done.add(v),o.pending.size===0){var _=s.outrogroups;At(Dt(o.done)),_.delete(o),_.size===0&&(s.outrogroups=null)}}else t-=1},!1)}if(t===0){var c=r.length===0&&a!==null;if(c){var d=a,g=d.parentNode;Yn(g),g.append(d),s.items.clear()}At(e,!c)}else o={pending:new Set(e),done:new Set},(s.outrogroups??=new Set).add(o)}function At(s,e=!0){for(var a=0;a<s.length;a++)Kn(s[a],e)}var Jt;function Ge(s,e,a,r,i,o=null){var t=s,l=new Map,c=(e&nn)!==0;if(c){var d=s;t=pe?st(sn(d)):d.appendChild(ht())}pe&&gt();var g=null,v=Pn(()=>{var b=a();return Fn(b)?b:b==null?[]:Dt(b)}),_,$=!0;function w(){h.fallback=g,ls(h,_,t,e,r),g!==null&&(_.length===0?(g.f&Le)===0?an(g):(g.f^=Le,dt(g,null,t)):rn(g,()=>{g=null}))}var E=tn(()=>{_=n(v);var b=_.length;let B=!1;if(pe){var Q=zn(t)===Ln;Q!==(b===0)&&(t=Ht(),st(t),ut(!1),B=!0)}for(var j=new Set,te=jn,oe=Hn(),W=0;W<b;W+=1){pe&&Be.nodeType===Un&&Be.data===Rn&&(t=Be,B=!0,ut(!1));var le=_[W],Z=r(le,W),K=$?null:l.get(Z);K?(K.v&&Ft(K.v,le),K.i&&Ft(K.i,W),oe&&te.skipped_effects.delete(K.e)):(K=cs(l,$?t:Jt??=ht(),le,Z,W,i,e,a),$||(K.e.f|=Le),l.set(Z,K)),j.add(Z)}if(b===0&&o&&!g&&($?g=xt(()=>o(t)):(g=xt(()=>o(Jt??=ht())),g.f|=Le)),pe&&b>0&&st(Ht()),!$)if(oe){for(const[S,M]of l)j.has(S)||te.skipped_effects.add(M.e);te.oncommit(w),te.ondiscard(()=>{})}else w();B&&ut(!0),n(v)}),h={effect:E,items:l,outrogroups:null,fallback:g};$=!1,pe&&(t=Be)}function ls(s,e,a,r,i){var o=(r&Wn)!==0,t=e.length,l=s.items,c=s.effect.first,d,g=null,v,_=[],$=[],w,E,h,b;if(o)for(b=0;b<t;b+=1)w=e[b],E=i(w,b),h=l.get(E).e,(h.f&Le)===0&&(h.nodes?.a?.measure(),(v??=new Set).add(h));for(b=0;b<t;b+=1){if(w=e[b],E=i(w,b),h=l.get(E).e,s.outrogroups!==null)for(const K of s.outrogroups)K.pending.delete(h),K.done.delete(h);if((h.f&Le)!==0)if(h.f^=Le,h===c)dt(h,null,a);else{var B=g?g.next:c;h===s.effect.last&&(s.effect.last=h.prev),h.prev&&(h.prev.next=h.next),h.next&&(h.next.prev=h.prev),Fe(s,g,h),Fe(s,h,B),dt(h,B,a),g=h,_=[],$=[],c=g.next;continue}if((h.f&Ct)!==0&&(an(h),o&&(h.nodes?.a?.unfix(),(v??=new Set).delete(h))),h!==c){if(d!==void 0&&d.has(h)){if(_.length<$.length){var Q=$[0],j;g=Q.prev;var te=_[0],oe=_[_.length-1];for(j=0;j<_.length;j+=1)dt(_[j],Q,a);for(j=0;j<$.length;j+=1)d.delete($[j]);Fe(s,te.prev,oe.next),Fe(s,g,te),Fe(s,oe,Q),c=Q,g=oe,b-=1,_=[],$=[]}else d.delete(h),dt(h,c,a),Fe(s,h.prev,h.next),Fe(s,h,g===null?s.effect.first:g.next),Fe(s,g,h),g=h;continue}for(_=[],$=[];c!==null&&c!==h;)(d??=new Set).add(c),$.push(c),c=c.next;if(c===null)continue}(h.f&Le)===0&&_.push(h),g=h,c=h.next}if(s.outrogroups!==null){for(const K of s.outrogroups)K.pending.size===0&&(At(Dt(K.done)),s.outrogroups?.delete(K));s.outrogroups.size===0&&(s.outrogroups=null)}if(c!==null||d!==void 0){var W=[];if(d!==void 0)for(h of d)(h.f&Ct)===0&&W.push(h);for(;c!==null;)(c.f&Ct)===0&&c!==s.fallback&&W.push(c),c=c.next;var le=W.length;if(le>0){var Z=(r&nn)!==0&&t===0?a:null;if(o){for(b=0;b<le;b+=1)W[b].nodes?.a?.measure();for(b=0;b<le;b+=1)W[b].nodes?.a?.fix()}os(s,W,Z)}}o&&Jn(()=>{if(v!==void 0)for(h of v)h.nodes?.a?.apply()})}function cs(s,e,a,r,i,o,t,l){var c=(t&qn)!==0?(t&Vn)===0?A(a,!1,!1):qt(a):null,d=(t&Bn)!==0?qt(i):null;return{v:c,i:d,e:xt(()=>(o(e,c??a,d??i,l),()=>{s.delete(r)}))}}function dt(s,e,a){if(s.nodes)for(var r=s.nodes.start,i=s.nodes.end,o=e&&(e.f&Le)===0?e.nodes.start:a;r!==null;){var t=Gn(r);if(o.before(r),r===i)return;r=t}}function Fe(s,e,a){e===null?s.effect.first=a:e.next=a,a===null?s.effect.last=e:a.prev=e}function se(s,e,a,r,i){pe&&gt();var o=e.$$slots?.[a],t=!1;o===!0&&(o=e.children,t=!0),o===void 0||o(s,t?()=>r:r)}function ds(s,e,a,r,i,o){let t=pe;pe&&gt();var l=null;pe&&Be.nodeType===Zn&&(l=Be,gt());var c=pe?Be:s,d=new is(c,!1);tn(()=>{const g=e()||null;var v=Qn;if(g===null){d.ensure(null,null);return}return d.ensure(g,_=>{if(g){if(l=pe?l:document.createElementNS(v,g),Cn(l,l),r){pe&&On(g)&&l.append(document.createComment(""));var $=pe?sn(l):l.appendChild(ht());pe&&($===null?ut(!1):st($)),r(l,$)}es.nodes.end=l,_.before(l)}pe&&st(_)}),()=>{}},Xn),ts(()=>{}),t&&(ut(!0),st(c))}const us=1,_t=2,Ot=3,Pt=4,vs=5,fs=6;function hs(s){return{type:"auth",access_token:s}}function gs(){return{type:"supported_features",id:1,features:{coalesce_messages:1}}}function _s(){return{type:"get_states"}}function ms(s,e,a,r,i){const o={type:"call_service",domain:s,service:e,target:r,return_response:i};return a&&(o.service_data=a),o}function ps(s){const e={type:"subscribe_events"};return s&&(e.event_type=s),e}function Gt(s){return{type:"unsubscribe_events",subscription:s}}function ys(){return{type:"ping"}}function bs(s,e){return{type:"result",success:!1,error:{code:s,message:e}}}function $s(s){const e={},a=s.split("&");for(let r=0;r<a.length;r++){const i=a[r].split("="),o=decodeURIComponent(i[0]),t=i.length>1?decodeURIComponent(i[1]):void 0;e[o]=t}return e}const cn=(s,e,a,r)=>{const[i,o,t]=s.split(".",3);return Number(i)>e||Number(i)===e&&(r===void 0?Number(o)>=a:Number(o)>a)||r!==void 0&&Number(i)===e&&Number(o)===a&&Number(t)>=r},ws="auth_invalid",ks="auth_ok";function Is(s){if(!s.auth)throw Pt;const e=s.auth;let a=e.expired?e.refreshAccessToken().then(()=>{a=void 0},()=>{a=void 0}):void 0;const r=e.wsUrl;function i(o,t,l){const c=new WebSocket(r);let d=!1;const g=()=>{if(c.removeEventListener("close",g),d){l(_t);return}if(o===0){l(us);return}const $=o===-1?-1:o-1;setTimeout(()=>i($,t,l),1e3)},v=async $=>{try{e.expired&&await(a||e.refreshAccessToken()),c.send(JSON.stringify(hs(e.accessToken)))}catch(w){d=w===_t,c.close()}},_=async $=>{const w=JSON.parse($.data);switch(w.type){case ws:d=!0,c.close();break;case ks:c.removeEventListener("open",v),c.removeEventListener("message",_),c.removeEventListener("close",g),c.removeEventListener("error",g),c.haVersion=w.ha_version,cn(c.haVersion,2022,9)&&c.send(JSON.stringify(gs())),t(c);break}};c.addEventListener("open",v),c.addEventListener("message",_),c.addEventListener("close",g),c.addEventListener("error",g)}return new Promise((o,t)=>i(s.setupRetry,o,t))}class Ms{constructor(e,a){this._handleMessage=r=>{let i=JSON.parse(r.data);Array.isArray(i)||(i=[i]),i.forEach(o=>{const t=this.commands.get(o.id);switch(o.type){case"event":t?t.callback(o.event):(console.warn(`Received event for unknown subscription ${o.id}. Unsubscribing.`),this.sendMessagePromise(Gt(o.id)).catch(l=>{}));break;case"result":t&&(o.success?(t.resolve(o.result),"subscribe"in t||this.commands.delete(o.id)):(t.reject(o.error),this.commands.delete(o.id)));break;case"pong":t?(t.resolve(),this.commands.delete(o.id)):console.warn(`Received unknown pong response ${o.id}`);break}})},this._handleClose=async()=>{const r=this.commands;if(this.commandId=1,this.oldSubscriptions=this.commands,this.commands=new Map,this.socket=void 0,r.forEach(t=>{"subscribe"in t||t.reject(bs(Ot,"Connection lost"))}),this.closeRequested)return;this.fireEvent("disconnected");const i=Object.assign(Object.assign({},this.options),{setupRetry:0}),o=t=>{setTimeout(async()=>{if(!this.closeRequested)try{const l=await i.createSocket(i);this._setSocket(l)}catch(l){if(this._queuedMessages){const c=this._queuedMessages;this._queuedMessages=void 0;for(const d of c)d.reject&&d.reject(Ot)}l===_t?this.fireEvent("reconnect-error",l):o(t+1)}},Math.min(t,5)*1e3)};this.suspendReconnectPromise&&(await this.suspendReconnectPromise,this.suspendReconnectPromise=void 0,this._queuedMessages=[]),o(0)},this.options=a,this.commandId=2,this.commands=new Map,this.eventListeners=new Map,this.closeRequested=!1,this._setSocket(e)}get connected(){return this.socket!==void 0&&this.socket.readyState==this.socket.OPEN}_setSocket(e){this.socket=e,this.haVersion=e.haVersion,e.addEventListener("message",this._handleMessage),e.addEventListener("close",this._handleClose);const a=this.oldSubscriptions;a&&(this.oldSubscriptions=void 0,a.forEach(i=>{"subscribe"in i&&i.subscribe&&i.subscribe().then(o=>{i.unsubscribe=o,i.resolve()})}));const r=this._queuedMessages;if(r){this._queuedMessages=void 0;for(const i of r)i.resolve()}this.fireEvent("ready")}addEventListener(e,a){let r=this.eventListeners.get(e);r||(r=[],this.eventListeners.set(e,r)),r.push(a)}removeEventListener(e,a){const r=this.eventListeners.get(e);if(!r)return;const i=r.indexOf(a);i!==-1&&r.splice(i,1)}fireEvent(e,a){(this.eventListeners.get(e)||[]).forEach(r=>r(this,a))}suspendReconnectUntil(e){this.suspendReconnectPromise=e}suspend(){if(!this.suspendReconnectPromise)throw new Error("Suspend promise not set");this.socket&&this.socket.close()}reconnect(e=!1){if(this.socket){if(!e){this.socket.close();return}this.socket.removeEventListener("message",this._handleMessage),this.socket.removeEventListener("close",this._handleClose),this.socket.close(),this._handleClose()}}close(){this.closeRequested=!0,this.socket&&this.socket.close()}async subscribeEvents(e,a){return this.subscribeMessage(e,ps(a))}ping(){return this.sendMessagePromise(ys())}sendMessage(e,a){if(!this.connected)throw Ot;if(this._queuedMessages){if(a)throw new Error("Cannot queue with commandId");this._queuedMessages.push({resolve:()=>this.sendMessage(e)});return}a||(a=this._genCmdId()),e.id=a,this.socket.send(JSON.stringify(e))}sendMessagePromise(e){return new Promise((a,r)=>{if(this._queuedMessages){this._queuedMessages.push({reject:r,resolve:async()=>{try{a(await this.sendMessagePromise(e))}catch(o){r(o)}}});return}const i=this._genCmdId();this.commands.set(i,{resolve:a,reject:r}),this.sendMessage(e,i)})}async subscribeMessage(e,a,r){if(this._queuedMessages&&await new Promise((o,t)=>{this._queuedMessages.push({resolve:o,reject:t})}),r?.preCheck&&!await r.preCheck())throw new Error("Pre-check failed");let i;return await new Promise((o,t)=>{const l=this._genCmdId();i={resolve:o,reject:t,callback:e,subscribe:r?.resubscribe!==!1?()=>this.subscribeMessage(e,a,r):void 0,unsubscribe:async()=>{this.connected&&await this.sendMessagePromise(Gt(l)),this.commands.delete(l)}},this.commands.set(l,i);try{this.sendMessage(a,l)}catch{}}),()=>i.unsubscribe()}_genCmdId(){return++this.commandId}}const Es=()=>`${location.protocol}//${location.host}/`,Ss=s=>s*1e3+Date.now();function Ts(){const{protocol:s,host:e,pathname:a,search:r}=location;return`${s}//${e}${a}${r}`}function Ns(s,e,a,r){let i=`${s}/auth/authorize?response_type=code&redirect_uri=${encodeURIComponent(a)}`;return e!==null&&(i+=`&client_id=${encodeURIComponent(e)}`),r&&(i+=`&state=${encodeURIComponent(r)}`),i}function Cs(s,e,a,r){a+=(a.includes("?")?"&":"?")+"auth_callback=1",document.location.href=Ns(s,e,a,r)}async function dn(s,e,a){const r=typeof location<"u"&&location;if(r&&r.protocol==="https:"){const l=document.createElement("a");if(l.href=s,l.protocol==="http:"&&l.hostname!=="localhost")throw vs}const i=new FormData;e!==null&&i.append("client_id",e),Object.keys(a).forEach(l=>{i.append(l,a[l])});const o=await fetch(`${s}/auth/token`,{method:"POST",credentials:"same-origin",body:i});if(!o.ok)throw o.status===400||o.status===403?_t:new Error("Unable to fetch tokens");const t=await o.json();return t.hassUrl=s,t.clientId=e,t.expires=Ss(t.expires_in),t}function Wt(s,e,a){return dn(s,e,{code:a,grant_type:"authorization_code"})}function Os(s){return btoa(JSON.stringify(s))}function xs(s){return JSON.parse(atob(s))}class As{constructor(e,a){this.data=e,this._saveTokens=a}get wsUrl(){return`ws${this.data.hassUrl.substr(4)}/api/websocket`}get accessToken(){return this.data.access_token}get expired(){return Date.now()>this.data.expires}async refreshAccessToken(){if(!this.data.refresh_token)throw new Error("No refresh_token");const e=await dn(this.data.hassUrl,this.data.clientId,{grant_type:"refresh_token",refresh_token:this.data.refresh_token});e.refresh_token=this.data.refresh_token,this.data=e,this._saveTokens&&this._saveTokens(e)}async revoke(){if(!this.data.refresh_token)throw new Error("No refresh_token to revoke");const e=new FormData;e.append("token",this.data.refresh_token),await fetch(`${this.data.hassUrl}/auth/revoke`,{method:"POST",credentials:"same-origin",body:e}),this._saveTokens&&this._saveTokens(null)}}async function Ds(s={}){let e,a=s.hassUrl;a&&a[a.length-1]==="/"&&(a=a.substr(0,a.length-1));const r=s.clientId!==void 0?s.clientId:Es(),i=s.limitHassInstance===!0;if(s.authCode&&a&&(e=await Wt(a,r,s.authCode),s.saveTokens&&s.saveTokens(e)),!e){const o=$s(location.search.substr(1));if("auth_callback"in o){const t=xs(o.state);if(i&&(t.hassUrl!==a||t.clientId!==r))throw fs;e=await Wt(t.hassUrl,t.clientId,o.code),s.saveTokens&&s.saveTokens(e)}}if(!e&&s.loadTokens&&(e=await s.loadTokens()),e&&(a===void 0||e.hassUrl===a))return new As(e,s.saveTokens);if(a===void 0)throw Pt;return Cs(a,r,s.redirectUrl||Ts(),Os({hassUrl:a,clientId:r})),new Promise(()=>{})}const Ps=s=>{let e=[];function a(i){let o=[];for(let t=0;t<e.length;t++)e[t]===i?i=null:o.push(e[t]);e=o}function r(i,o){s=o?i:Object.assign(Object.assign({},s),i);let t=e;for(let l=0;l<t.length;l++)t[l](s)}return{get state(){return s},action(i){function o(t){r(t,!1)}return function(){let t=[s];for(let c=0;c<arguments.length;c++)t.push(arguments[c]);let l=i.apply(this,t);if(l!=null)return l instanceof Promise?l.then(o):o(l)}},setState:r,clearState(){s=void 0},subscribe(i){return e.push(i),()=>{a(i)}}}},zs=5e3,Yt=(s,e,a,r,i={unsubGrace:!0})=>{if(s[e])return s[e];let o=0,t,l,c=Ps();const d=()=>{if(!a)throw new Error("Collection does not support refresh");return a(s).then(E=>c.setState(E,!0))},g=()=>d().catch(E=>{if(s.connected)throw E}),v=()=>{if(l!==void 0){clearTimeout(l),l=void 0;return}r&&(t=r(s,c)),a&&(s.addEventListener("ready",g),g()),s.addEventListener("disconnected",w)},_=()=>{l=void 0,t&&t.then(E=>{E()}),c.clearState(),s.removeEventListener("ready",d),s.removeEventListener("disconnected",w)},$=()=>{l=setTimeout(_,zs)},w=()=>{l&&(clearTimeout(l),_())};return s[e]={get state(){return c.state},refresh:d,subscribe(E){o++,o===1&&v();const h=c.subscribe(E);return c.state!==void 0&&setTimeout(()=>E(c.state),0),()=>{h(),o--,o||(i.unsubGrace?$():_())}}},s[e]},Ls=s=>s.sendMessagePromise(_s()),Ue=(s,e,a,r,i,o)=>s.sendMessagePromise(ms(e,a,r,i,o));function Us(s,e){const a=Object.assign({},s.state);if(e.a)for(const r in e.a){const i=e.a[r];let o=new Date(i.lc*1e3).toISOString();a[r]={entity_id:r,state:i.s,attributes:i.a,context:typeof i.c=="string"?{id:i.c,parent_id:null,user_id:null}:i.c,last_changed:o,last_updated:i.lu?new Date(i.lu*1e3).toISOString():o}}if(e.r)for(const r of e.r)delete a[r];if(e.c)for(const r in e.c){let i=a[r];if(!i){console.warn("Received state update for unknown entity",r);continue}i=Object.assign({},i);const{"+":o,"-":t}=e.c[r],l=o?.a||t?.a,c=l?Object.assign({},i.attributes):i.attributes;if(o&&(o.s!==void 0&&(i.state=o.s),o.c&&(typeof o.c=="string"?i.context=Object.assign(Object.assign({},i.context),{id:o.c}):i.context=Object.assign(Object.assign({},i.context),o.c)),o.lc?i.last_updated=i.last_changed=new Date(o.lc*1e3).toISOString():o.lu&&(i.last_updated=new Date(o.lu*1e3).toISOString()),o.a&&Object.assign(c,o.a)),t?.a)for(const d of t.a)delete c[d];l&&(i.attributes=c),a[r]=i}s.setState(a,!0)}const Rs=(s,e)=>s.subscribeMessage(a=>Us(e,a),{type:"subscribe_entities"});function js(s,e){const a=s.state;if(a===void 0)return;const{entity_id:r,new_state:i}=e.data;if(i)s.setState({[i.entity_id]:i});else{const o=Object.assign({},a);delete o[r],s.setState(o,!0)}}async function Hs(s){const e=await Ls(s),a={};for(let r=0;r<e.length;r++){const i=e[r];a[i.entity_id]=i}return a}const Fs=(s,e)=>s.subscribeEvents(a=>js(e,a),"state_changed"),qs=s=>cn(s.haVersion,2022,4,0)?Yt(s,"_ent",void 0,Rs):Yt(s,"_ent",Hs,Fs),Vs=(s,e)=>qs(s).subscribe(e);async function Bs(s){const e=Object.assign({setupRetry:0,createSocket:Is},s),a=await e.createSocket(e);return new Ms(a,e)}const at="http://192.168.4.198:8123",Js="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiI5MGUyMmI1ZjM5MzE0YjAwYjExMmIwYjIyOWQzMGU2ZSIsImlhdCI6MTc2NTM3NzAxMSwiZXhwIjoyMDgwNzM3MDExfQ.IYC-J2dChOGDq18zbtuj-q7ljJwfyQ12SDKFZUobn2k",Ce=bt({}),Ae=bt(null),nt=bt(!1),Ve=bt(null);let ze;async function Gs(){return{access_token:Js,expires:Date.now()+1e11,hassUrl:at,clientId:null,expires_in:1e11,refresh_token:""}}async function Ws(s){}async function Ys(){try{const s=await Ds({hassUrl:at,loadTokens:Gs,saveTokens:Ws});ze=await Bs({auth:s}),console.log("Connection established via createConnection"),nt.set(!0),Ae.set(ze),Ve.set(null),Vs(ze,e=>{console.log("Received entity updates",Object.keys(e).length),Ce.set(e)}),ze.addEventListener("ready",()=>{console.log("Connection ready event"),nt.set(!0),Ae.set(ze),Ve.set(null)}),ze.addEventListener("disconnected",()=>{console.log("Disconnected from Home Assistant"),nt.set(!1),Ae.set(null),Ve.set("Disconnected")}),ze.addEventListener("reconnect-error",()=>{console.error("Reconnect error"),Ve.set("Reconnecting...")})}catch(s){console.error("Connection failed",s),nt.set(!1),s===Pt?Ve.set("Host required"):Ve.set(s.message||"Connection failed - Check console")}}async function Ks(s,e,a){const r=e||new Date,i=a||new Date(Date.now()+10080*60*1e3);if(console.log("Fetching calendar events:",{entityId:s,start:r.toISOString(),end:i.toISOString(),startDate:r.toLocaleString(),endDate:i.toLocaleString()}),ze)try{let o=function(d,g=""){if(!d)return null;if(Array.isArray(d)){if(d.length===0)return null;const v=d[0];return v&&typeof v=="object"&&(v.summary||v.start||v.end||v.title)?(console.log(`Found event array at path: ${g} with ${d.length} events`),d):null}if(typeof d=="object"){for(const v in d)if(d.hasOwnProperty(v)){const _=o(d[v],g?`${g}.${v}`:v);if(_)return _}}return null};const t=await ze.sendMessagePromise({type:"call_service",domain:"calendar",service:"get_events",service_data:{entity_id:s,start_date_time:r.toISOString(),end_date_time:i.toISOString()},return_response:!0});console.log("Calendar service result:",JSON.stringify(t,null,2)),console.log("Result type:",typeof t),console.log("Is array:",Array.isArray(t)),console.log("Entity ID:",s);const l=o(t);if(l)return console.log(`Found ${l.length} events recursively`),l;let c=null;if(t?.response){const d=t.response;if(console.log("Found result.response:",typeof d,Array.isArray(d)),Array.isArray(d))c=d,console.log("Response is array with",c.length,"events");else if(d&&typeof d=="object")if(d[s]&&Array.isArray(d[s]))c=d[s],console.log(`Found events in response.${s}:`,c.length,"events");else if(d.events&&Array.isArray(d.events))c=d.events,console.log("Found events in response.events:",c.length,"events");else{const g=Object.keys(d);console.log("Response keys:",g);for(const v of g)if(Array.isArray(d[v])&&d[v].length>0){const _=d[v][0];if(_&&typeof _=="object"&&(_.summary||_.start||_.end||_.title)){c=d[v],console.log(`Found event array in response.${v}:`,c.length,"events");break}}}}else if(Array.isArray(t)&&t.length>0){const d=t[0];d&&typeof d=="object"&&(d.summary||d.start||d.end||d.title)&&(c=t,console.log("Result is directly an array:",c.length,"events"))}else t?.events&&Array.isArray(t.events)?(c=t.events,console.log("Found events in result.events:",c.length,"events")):t&&typeof t=="object"&&t[s]&&Array.isArray(t[s])&&(c=t[s],console.log(`Found events in result.${s}:`,c.length,"events"));return Array.isArray(c)&&c.length>0?(console.log(`Returning ${c.length} events`),c[0]&&console.log("First event structure:",Object.keys(c[0])),c):(console.log("No events found in result structure"),console.log("Result keys:",t?Object.keys(t):"null"),t?.response&&typeof t.response=="object"&&console.log("Response keys:",Object.keys(t.response)),[])}catch(o){throw console.error("Service call failed:",o),new Error(`Calendar service error: ${o.message||o.code||"Unknown error"}`)}throw new Error("Not connected to Home Assistant. Calendar events require a websocket connection.")}const Zs={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Xs=xn("<svg><!><!></svg>");function ie(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]),r=ee(a,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Ie(e,!1);let i=L(e,"name",8,void 0),o=L(e,"color",8,"currentColor"),t=L(e,"size",8,24),l=L(e,"strokeWidth",8,2),c=L(e,"absoluteStrokeWidth",8,!1),d=L(e,"iconNode",24,()=>[]);const g=(...w)=>w.filter((E,h,b)=>!!E&&b.indexOf(E)===h).join(" ");Ne();var v=Xs();Bt(v,(w,E)=>({...Zs,...r,width:t(),height:t(),stroke:o(),"stroke-width":w,class:E}),[()=>(P(c()),P(l()),P(t()),q(()=>c()?Number(l())*24/Number(t()):l())),()=>(P(i()),P(a),q(()=>g("lucide-icon","lucide",i()?`lucide-${i()}`:"",a.class)))]);var _=f(v);Ge(_,1,d,Je,(w,E)=>{var h=me(()=>on(n(E),2));let b=()=>n(h)[0],B=()=>n(h)[1];var Q=R(),j=D(Q);ds(j,b,!0,(te,oe)=>{Bt(te,()=>({...B()}))}),p(w,Q)});var $=I(_);se($,e,"default",{}),u(v),p(s,v),Me()}function mt(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}],["path",{d:"M10 4v4"}],["path",{d:"M2 8h20"}],["path",{d:"M6 4v4"}]];ie(s,re({name:"app-window"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function Qs(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M 22 14 L 22 10"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2"}]];ie(s,re({name:"battery"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function Kt(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]];ie(s,re({name:"calendar"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function pt(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]];ie(s,re({name:"circle-check"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function ea(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]];ie(s,re({name:"circle-question-mark"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function Zt(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 6v6l4 2"}],["circle",{cx:"12",cy:"12",r:"10"}]];ie(s,re({name:"clock"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function un(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M10 12h.01"}],["path",{d:"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14"}],["path",{d:"M2 20h20"}]];ie(s,re({name:"door-closed"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function vn(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M11 20H2"}],["path",{d:"M11 4.562v16.157a1 1 0 0 0 1.242.97L19 20V5.562a2 2 0 0 0-1.515-1.94l-4-1A2 2 0 0 0 11 4.561z"}],["path",{d:"M11 4H8a2 2 0 0 0-2 2v14"}],["path",{d:"M14 12h.01"}],["path",{d:"M22 20h-3"}]];ie(s,re({name:"door-open"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function fn(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z"}],["path",{d:"M16 17h4"}],["path",{d:"M4 13h4"}]];ie(s,re({name:"footprints"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function ta(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]];ie(s,re({name:"house"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function hn(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M16.8 11.2c.8-.9 1.2-2 1.2-3.2a6 6 0 0 0-9.3-5"}],["path",{d:"m2 2 20 20"}],["path",{d:"M6.3 6.3a4.67 4.67 0 0 0 1.2 5.2c.7.7 1.3 1.5 1.5 2.5"}],["path",{d:"M9 18h6"}],["path",{d:"M10 22h4"}]];ie(s,re({name:"lightbulb-off"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function na(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"}],["path",{d:"M9 18h6"}],["path",{d:"M10 22h4"}]];ie(s,re({name:"lightbulb"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function sa(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"}],["circle",{cx:"12",cy:"10",r:"3"}]];ie(s,re({name:"map-pin"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function aa(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"}]];ie(s,re({name:"moon"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function Xt(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1"}]];ie(s,re({name:"pause"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function Qt(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z"}]];ie(s,re({name:"play"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function ra(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 22v-5"}],["path",{d:"M15 8V2"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z"}],["path",{d:"M9 8V2"}]];ie(s,re({name:"plug"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function zt(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 2v10"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04"}]];ie(s,re({name:"power"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function ia(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z"}],["path",{d:"M3 20V4"}]];ie(s,re({name:"skip-back"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function oa(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M21 4v16"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z"}]];ie(s,re({name:"skip-forward"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function la(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]];ie(s,re({name:"sun"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function ca(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M3.5 21 14 3"}],["path",{d:"M20.5 21 10 3"}],["path",{d:"M15.5 21 12 15l-3.5 6"}],["path",{d:"M2 21h20"}]];ie(s,re({name:"tent"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function da(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"}]];ie(s,re({name:"thermometer"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function gn(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]];ie(s,re({name:"triangle-alert"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function ua(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"m17 2-5 5-5-5"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2"}]];ie(s,re({name:"tv"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}function yt(s,e){const a=ee(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z"}],["path",{d:"M6 13h12"}],["path",{d:"M6 17h12"}]];ie(s,re({name:"warehouse"},()=>a,{get iconNode(){return r},children:(i,o)=>{var t=R(),l=D(t);se(l,e,"default",{}),p(i,t)},$$slots:{default:!0}}))}var va=z('<div><div class="icon svelte-1ds1j5k"><!></div> <div class="name svelte-1ds1j5k"> </div> <div class="state svelte-1ds1j5k"> </div></div>');function fa(s,e){Ie(e,!1);const a=()=>ue(Ce,"$entities",i),r=()=>ue(Ae,"$connection",i),[i,o]=Te(),t=A(),l=A();let c=L(e,"entityId",8),d=L(e,"label",8);function g(){r()&&Ue(r(),"homeassistant","toggle",{entity_id:c()})}U(()=>(a(),P(c())),()=>{N(t,a()[c()])}),U(()=>n(t),()=>{N(l,n(t)?.state==="on")}),Pe(),Ne();var v=va(),_=f(v),$=f(_);{var w=j=>{na(j,{size:32})},E=j=>{hn(j,{size:32})};V($,j=>{n(l)?j(w):j(E,!1)})}u(_);var h=I(_,2),b=f(h,!0);u(h);var B=I(h,2),Q=f(B,!0);u(B),u(v),Y(()=>{De(v,1,`tile ${n(l)?"on":"off"} glass-panel`,"svelte-1ds1j5k"),x(b,(P(d()),n(t),P(c()),q(()=>d()||n(t)?.attributes.friendly_name||c()))),x(Q,(n(t),q(()=>n(t)?.state||"Unknown")))}),qe("click",v,g),p(s,v),Me(),o()}var ha=z('<div class="tile sensor glass-panel svelte-1mck596"><div class="header svelte-1mck596"> </div> <div class="value svelte-1mck596"> <span class="unit svelte-1mck596"> </span></div></div>');function ga(s,e){Ie(e,!1);const a=()=>ue(Ce,"$entities",r),[r,i]=Te(),o=A(),t=A(),l=A(),c=A();let d=L(e,"entityId",8),g=L(e,"label",8),v=L(e,"format",8,""),_=L(e,"unit",8,"");U(()=>(a(),P(d())),()=>{N(o,a()[d()])}),U(()=>n(o),()=>{N(t,n(o)?.state)}),U(()=>(P(_()),n(o)),()=>{N(l,_()||n(o)?.attributes.unit_of_measurement||"")}),U(()=>(P(v()),n(t)),()=>{N(c,v()==="date"&&n(t)?new Date(n(t)).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):n(t))}),Pe(),Ne();var $=ha(),w=f($),E=f(w,!0);u(w);var h=I(w,2),b=f(h),B=I(b),Q=f(B,!0);u(B),u(h),u($),Y(()=>{x(E,(P(g()),n(o),P(d()),q(()=>g()||n(o)?.attributes.friendly_name||d()))),x(b,`${(n(c)||"--")??""} `),x(Q,n(l))}),p(s,$),Me(),i()}var _a=z('<div><div class="header svelte-d2lh25"> </div> <div class="content svelte-d2lh25"><span class="icon svelte-d2lh25"><!></span> <span class="state svelte-d2lh25"> </span></div></div>');function ma(s,e){Ie(e,!1);const a=()=>ue(Ce,"$entities",r),[r,i]=Te(),o=A(),t=A(),l=A(),c=A(),d=A();let g=L(e,"entityId",8),v=L(e,"label",8),_=L(e,"deviceClass",8,"door");function $(Z){switch(Z){case"door":return"Open";case"window":return"Open";case"motion":return"Detected";case"garage":return"Open";case"problem":return"Problem";default:return"On"}}function w(Z){switch(Z){case"door":return"Closed";case"window":return"Closed";case"motion":return"Clear";case"garage":return"Closed";case"problem":return"OK";default:return"Off"}}function E(Z){switch(Z){case"door":return vn;case"window":return mt;case"motion":return fn;case"garage":return yt;default:return gn}}function h(Z){switch(Z){case"door":return un;case"window":return mt;case"motion":return pt;case"garage":return yt;default:return pt}}U(()=>(a(),P(g())),()=>{N(o,a()[g()])}),U(()=>n(o),()=>{N(t,n(o)?.state)}),U(()=>n(t),()=>{N(l,n(t)==="on")}),U(()=>(n(l),P(_())),()=>{N(c,n(l)?$(_()):w(_()))}),U(()=>(n(l),P(_())),()=>{N(d,n(l)?E(_()):h(_()))}),Pe(),Ne();var b=_a(),B=f(b),Q=f(B,!0);u(B);var j=I(B,2),te=f(j),oe=f(te);ln(oe,()=>n(d),(Z,K)=>{K(Z,{size:24})}),u(te);var W=I(te,2),le=f(W,!0);u(W),u(j),u(b),Y(()=>{De(b,1,`tile ${n(l)?"active":"inactive"} glass-panel`,"svelte-d2lh25"),x(Q,(P(v()),n(o),P(g()),q(()=>v()||n(o)?.attributes.friendly_name||g()))),x(le,n(c))}),p(s,b),Me(),i()}var pa=z('<div><div class="icon svelte-h88ioc"><!></div> <div class="name svelte-h88ioc"> </div> <div class="state svelte-h88ioc"> </div></div>');function ya(s,e){Ie(e,!1);const a=()=>ue(Ce,"$entities",i),r=()=>ue(Ae,"$connection",i),[i,o]=Te(),t=A(),l=A();let c=L(e,"entityId",8),d=L(e,"label",8);function g(){r()&&Ue(r(),"homeassistant","toggle",{entity_id:c()})}U(()=>(a(),P(c())),()=>{N(t,a()[c()])}),U(()=>n(t),()=>{N(l,n(t)?.state==="on")}),Pe(),Ne();var v=pa(),_=f(v),$=f(_);ra($,{size:32}),u(_);var w=I(_,2),E=f(w,!0);u(w);var h=I(w,2),b=f(h,!0);u(h),u(v),Y(()=>{De(v,1,`tile ${n(l)?"on":"off"} glass-panel`,"svelte-h88ioc"),x(E,(P(d()),n(t),P(c()),q(()=>d()||n(t)?.attributes.friendly_name||c()))),x(b,(n(t),q(()=>n(t)?.state||"Unknown")))}),qe("click",v,g),p(s,v),Me(),o()}var ba=z('<img class="avatar svelte-1kgjbrn"/>'),$a=z('<span class="icon svelte-1kgjbrn"><!></span>'),wa=z('<div class="battery svelte-1kgjbrn"><span><!></span> <span> </span></div>'),ka=z('<div><div class="icon-area svelte-1kgjbrn"><!></div> <div class="info svelte-1kgjbrn"><div class="name svelte-1kgjbrn"> </div> <div class="state svelte-1kgjbrn"> </div> <!></div></div>');function Ia(s,e){Ie(e,!1);const a=()=>ue(Ce,"$entities",r),[r,i]=Te(),o=A(),t=A(),l=A(),c=A(),d=A(),g=A(),v=A(),_=A();let $=L(e,"entityId",8),w=L(e,"label",8),E=L(e,"batteryEntityId",8,void 0);U(()=>(a(),P($())),()=>{N(o,a()[$()])}),U(()=>n(o),()=>{N(t,n(o)?.state)}),U(()=>n(t),()=>{N(l,n(t)==="home")}),U(()=>n(o),()=>{N(c,n(o)?.attributes.entity_picture)}),U(()=>(n(c),at),()=>{N(d,n(c)?new URL(n(c),at).href:null)}),U(()=>(P(E()),a()),()=>{N(g,E()?a()[E()]:null)}),U(()=>n(g),()=>{N(v,(()=>{if(!n(g)||!n(g).state||n(g).state==="unavailable"||n(g).state==="unknown")return null;const M=parseFloat(n(g).state);return isNaN(M)?null:M})())}),U(()=>n(g),()=>{N(_,n(g)?.attributes.unit_of_measurement||"%")}),U(()=>(P(E()),n(g),a(),n(v),n(_)),()=>{E()&&(n(g)?console.log(`Battery entity ${E()}:`,{state:n(g).state,level:n(v),unit:n(_)}):console.warn(`Battery entity "${E()}" not found in entities. Available entities:`,Object.keys(a()).filter(M=>M.includes("battery")||M.includes("phone"))))}),Pe(),Ne();var h=ka(),b=f(h),B=f(b);{var Q=M=>{var m=ba();Y(()=>{vt(m,"src",n(d)),vt(m,"alt",w())}),p(M,m)},j=M=>{var m=$a(),y=f(m);{var T=H=>{ta(H,{size:24})},X=H=>{ca(H,{size:24})};V(y,H=>{n(l)?H(T):H(X,!1)})}u(m),p(M,m)};V(B,M=>{n(d)?M(Q):M(j,!1)})}u(b);var te=I(b,2),oe=f(te),W=f(oe,!0);u(oe);var le=I(oe,2),Z=f(le,!0);u(le);var K=I(le,2);{var S=M=>{var m=wa(),y=f(m);let T;var X=f(y);Qs(X,{size:14}),u(y);var H=I(y,2),F=f(H);u(H),u(m),Y(G=>{T=De(y,1,"battery-icon svelte-1kgjbrn",null,T,{low:n(v)<20}),x(F,`${G??""}${n(_)??""}`)},[()=>(n(v),q(()=>Math.round(n(v))))]),p(M,m)};V(K,M=>{n(v)!==null&&M(S)})}u(te),u(h),Y(()=>{De(h,1,`tile ${n(l)?"home":"away"} glass-panel`,"svelte-1kgjbrn"),x(W,(P(w()),n(o),P($()),q(()=>w()||n(o)?.attributes.friendly_name||$()))),x(Z,n(t)||"Unknown")}),p(s,h),Me(),i()}var Ma=z('<div class="artist svelte-l11nk0"> </div>'),Ea=z('<div class="temperature svelte-l11nk0"><!> </div>'),Sa=z('<div><div class="bg-overlay svelte-l11nk0"></div> <div class="content svelte-l11nk0"><div class="header svelte-l11nk0"><div class="header-left svelte-l11nk0"><span class="icon"><!></span> <span class="label"> </span></div> <div class="header-right svelte-l11nk0"><button class="btn-icon power svelte-l11nk0"><!></button></div></div> <div class="info svelte-l11nk0"><div class="text-info"><div class="title svelte-l11nk0"> </div> <!></div> <div class="controls svelte-l11nk0"><!> <button class="btn-control svelte-l11nk0"><!></button> <button class="btn-control play-pause svelte-l11nk0"><!></button> <button class="btn-control svelte-l11nk0"><!></button></div></div></div></div>');function Ta(s,e){Ie(e,!1);const a=()=>ue(Ce,"$entities",i),r=()=>ue(Ae,"$connection",i),[i,o]=Te(),t=A(),l=A(),c=A(),d=A(),g=A(),v=A(),_=A(),$=A(),w=A(),E=A();let h=L(e,"entityId",8),b=L(e,"label",8),B=L(e,"temperatureEntityId",8,void 0);function Q(J){J.stopPropagation(),r()&&Ue(r(),"media_player","media_play_pause",{entity_id:h()})}function j(J){J.stopPropagation(),r()&&Ue(r(),"media_player","media_next_track",{entity_id:h()})}function te(J){J.stopPropagation(),r()&&Ue(r(),"media_player","media_previous_track",{entity_id:h()})}function oe(J){J.stopPropagation(),r()&&Ue(r(),"media_player","toggle",{entity_id:h()})}U(()=>(a(),P(h())),()=>{N(t,a()[h()])}),U(()=>n(t),()=>{N(l,n(t)?.state)}),U(()=>n(l),()=>{N(c,n(l)==="playing")}),U(()=>n(t),()=>{N(d,n(t)?.attributes||{})}),U(()=>n(d),()=>{N(g,n(d).media_title||n(d).source||"No Media")}),U(()=>n(d),()=>{N(v,n(d).media_artist||n(d).media_series_title||"")}),U(()=>n(d),()=>{N(_,n(d).entity_picture)}),U(()=>(n(_),at),()=>{N($,n(_)?new URL(n(_),at).href:null)}),U(()=>(P(B()),a()),()=>{N(w,B()?a()[B()]:null)}),U(()=>n(w),()=>{N(E,n(w)?`${n(w).state}${n(w).attributes.unit_of_measurement||"°C"}`:null)}),Pe(),Ne();var W=Sa();let le;var Z=I(f(W),2),K=f(Z),S=f(K),M=f(S),m=f(M);{var y=J=>{Qt(J,{size:16,fill:"currentColor"})},T=J=>{var ye=R(),ae=D(ye);{var he=ge=>{Xt(ge,{size:16,fill:"currentColor"})},ke=ge=>{ua(ge,{size:16})};V(ae,ge=>{n(l)==="paused"?ge(he):ge(ke,!1)},!0)}p(J,ye)};V(m,J=>{n(l)==="playing"?J(y):J(T,!1)})}u(M);var X=I(M,2),H=f(X,!0);u(X),u(S);var F=I(S,2),G=f(F),ce=f(G);zt(ce,{size:20}),u(G),u(F),u(K);var be=I(K,2),we=f(be),ve=f(we),de=f(ve,!0);u(ve);var C=I(ve,2);{var k=J=>{var ye=Ma(),ae=f(ye,!0);u(ye),Y(()=>x(ae,n(v))),p(J,ye)};V(C,J=>{n(v)&&J(k)})}u(we);var ne=I(we,2),fe=f(ne);{var Ee=J=>{var ye=Ea(),ae=f(ye);da(ae,{size:14,class:"temp-icon"});var he=I(ae);u(ye),Y(()=>x(he,` ${n(E)??""}`)),p(J,ye)};V(fe,J=>{n(E)&&J(Ee)})}var _e=I(fe,2),Re=f(_e);ia(Re,{size:24,fill:"currentColor"}),u(_e);var je=I(_e,2),We=f(je);{var rt=J=>{Xt(J,{size:32,fill:"currentColor"})},O=J=>{Qt(J,{size:32,fill:"currentColor"})};V(We,J=>{n(c)?J(rt):J(O,!1)})}u(je);var Oe=I(je,2),it=f(Oe);oa(it,{size:24,fill:"currentColor"}),u(Oe),u(ne),u(be),u(Z),u(W),Y(()=>{De(W,1,`tile ${n(l)??""} glass-panel`,"svelte-l11nk0"),le=as(W,"",le,{"--bg-image":n($)?`url('${n($)}')`:"none"}),x(H,(P(b()),n(d),q(()=>b()||n(d).friendly_name||"Media"))),x(de,n(g))}),qe("click",G,oe),qe("click",_e,te),qe("click",je,Q),qe("click",Oe,j),p(s,W),Me(),o()}var Na=z('<div><div class="icon svelte-1kbr3j6"><!></div> <div class="name svelte-1kbr3j6"> </div> <div class="state svelte-1kbr3j6"> </div></div>');function Ca(s,e){Ie(e,!1);const a=()=>ue(Ce,"$entities",i),r=()=>ue(Ae,"$connection",i),[i,o]=Te(),t=A(),l=A();let c=L(e,"entityId",8),d=L(e,"label",8,"");function g(){r()&&Ue(r(),"input_boolean","toggle",{entity_id:c()})}U(()=>(a(),P(c())),()=>{N(t,a()[c()])}),U(()=>n(t),()=>{N(l,n(t)?.state==="on")}),Pe(),Ne();var v=Na(),_=f(v),$=f(_);zt($,{size:32}),u(_);var w=I(_,2),E=f(w,!0);u(w);var h=I(w,2),b=f(h,!0);u(h),u(v),Y(()=>{De(v,1,rs(n(l)?"tile on glass-panel":"tile off glass-panel"),"svelte-1kbr3j6"),x(E,(P(d()),n(t),P(c()),q(()=>d()||n(t)?.attributes.friendly_name||c()))),x(b,(n(t),q(()=>n(t)?.state||"Unknown")))}),qe("click",v,g),p(s,v),Me(),o()}var Oa=z('<div><div class="icon svelte-tiial9"><!></div> <div class="name svelte-tiial9"> </div> <div class="state svelte-tiial9"> </div></div>');function xa(s,e){Ie(e,!1);const a=()=>ue(Ce,"$entities",i),r=()=>ue(Ae,"$connection",i),[i,o]=Te(),t=A(),l=A();let c=L(e,"entityId",8),d=L(e,"label",8,"");function g(){if(!r())return;const B=n(l)?"turn_off":"turn_on";Ue(r(),"homeassistant",B,{entity_id:c()})}U(()=>(a(),P(c())),()=>{N(t,a()[c()])}),U(()=>n(t),()=>{N(l,n(t)?.state==="on")}),Pe(),Ne();var v=Oa(),_=f(v),$=f(_);zt($,{size:32}),u(_);var w=I(_,2),E=f(w,!0);u(w);var h=I(w,2),b=f(h,!0);u(h),u(v),Y(()=>{De(v,1,`tile ${n(l)?"on":"off"} glass-panel`,"svelte-tiial9"),x(E,(P(d()),n(t),P(c()),q(()=>d()||n(t)?.attributes.friendly_name||c()))),x(b,(n(t),q(()=>n(t)?.state||"Unknown")))}),qe("click",v,g),p(s,v),Me(),o()}var Aa=z('<h3 class="title svelte-3p7m1a"> </h3>'),Da=z(', <span class="active-count svelte-3p7m1a"> </span>',1),Pa=z(', <span class="unavailable-count svelte-3p7m1a"> </span>',1),za=z('<div class="summary svelte-3p7m1a"> <!> <!></div>'),La=z('<div class="header svelte-3p7m1a"><!> <!></div>'),Ua=z('<div class="empty-state svelte-3p7m1a"><p>No sensors available</p></div>'),Ra=z('<div><div class="icon svelte-3p7m1a"><!></div> <div class="name svelte-3p7m1a"> </div> <div class="state svelte-3p7m1a"> </div></div>'),ja=z('<div class="status-grid svelte-3p7m1a"></div>'),Ha=z('<div class="status-grid-container svelte-3p7m1a"><!> <!></div>');function Fa(s,e){Ie(e,!1);const a=()=>ue(Ce,"$entities",r),[r,i]=Te(),o=A(),t=A();let l=L(e,"entityIds",24,()=>[]),c=L(e,"labels",24,()=>({})),d=L(e,"deviceClass",8,"door"),g=L(e,"deviceClasses",24,()=>({})),v=L(e,"title",8,""),_=L(e,"showSummary",8,!1),$=L(e,"hideUnavailable",8,!1),w=L(e,"sortByState",8,!0);function E(S){switch(S){case"door":return"Open";case"window":return"Open";case"motion":return"Detected";case"garage":return"Open";case"problem":return"Problem";default:return"On"}}function h(S){switch(S){case"door":return"Closed";case"window":return"Closed";case"motion":return"Clear";case"garage":return"Closed";case"problem":return"OK";default:return"Off"}}function b(S){switch(S){case"door":return vn;case"window":return mt;case"motion":return fn;case"garage":return yt;default:return gn}}function B(S){switch(S){case"door":return un;case"window":return mt;case"motion":return pt;case"garage":return yt;default:return pt}}function Q(S,M,m){return!S||S==="unavailable"||S==="unknown"?S==="unavailable"?"Unavailable":"Unknown":m?E(M):h(M)}function j(S,M,m){return!S||S==="unavailable"||S==="unknown"?ea:m?b(M):B(M)}U(()=>(P(l()),a(),P(g()),P(d()),P($()),P(c()),P(w())),()=>{N(o,l().map(S=>{const M=a()[S],m=g()[S]??M?.attributes?.device_class??d(),y=M?.state,T=y==="on",X=!y||y==="unavailable"||y==="unknown";return $()&&X?null:{id:S,entity:M,label:c()[S]??M?.attributes?.friendly_name??S,deviceClass:m,state:y,isOn:T,isUnavailable:X,stateLabel:Q(y,m,T),IconComponent:j(y,m,T)}}).filter(S=>S!==null).sort((S,M)=>{if(w()){if(S.isUnavailable&&!M.isUnavailable)return-1;if(!S.isUnavailable&&M.isUnavailable)return 1;if(S.isOn&&!M.isOn)return-1;if(!S.isOn&&M.isOn)return 1}return 0}))}),U(()=>(P(_()),n(o)),()=>{N(t,_()?(()=>{const S=n(o).length,M=n(o).filter(y=>y.isOn).length,m=n(o).filter(y=>y.isUnavailable).length;return{total:S,active:M,unavailable:m}})():null)}),Pe(),Ne();var te=Ha(),oe=f(te);{var W=S=>{var M=La(),m=f(M);{var y=H=>{var F=Aa(),G=f(F,!0);u(F),Y(()=>x(G,v())),p(H,F)};V(m,H=>{v()&&H(y)})}var T=I(m,2);{var X=H=>{var F=za(),G=f(F),ce=I(G);{var be=de=>{var C=Da(),k=I(D(C)),ne=f(k);u(k),Y(()=>x(ne,`${n(t),q(()=>n(t).active)??""} active`)),p(de,C)};V(ce,de=>{n(t),q(()=>n(t).active>0)&&de(be)})}var we=I(ce,2);{var ve=de=>{var C=Pa(),k=I(D(C)),ne=f(k);u(k),Y(()=>x(ne,`${n(t),q(()=>n(t).unavailable)??""} unavailable`)),p(de,C)};V(we,de=>{n(t),q(()=>n(t).unavailable>0)&&de(ve)})}u(F),Y(()=>x(G,`${n(t),q(()=>n(t).total)??""} ${n(t),q(()=>n(t).total===1?"sensor":"sensors")??""} `)),p(H,F)};V(T,H=>{n(t)&&H(X)})}u(M),p(S,M)};V(oe,S=>{(v()||n(t))&&S(W)})}var le=I(oe,2);{var Z=S=>{var M=Ua();p(S,M)},K=S=>{var M=ja();Ge(M,5,()=>n(o),Je,(m,y)=>{let T=()=>n(y).label,X=()=>n(y).isOn,H=()=>n(y).isUnavailable,F=()=>n(y).stateLabel,G=()=>n(y).IconComponent;var ce=Ra(),be=f(ce),we=f(be);ln(we,G,(ne,fe)=>{fe(ne,{size:24})}),u(be);var ve=I(be,2),de=f(ve,!0);u(ve);var C=I(ve,2),k=f(C,!0);u(C),u(ce),Y(()=>{De(ce,1,`tile glass-panel ${H()?"unavailable":X()?"active":"inactive"}`,"svelte-3p7m1a"),vt(ce,"title",`${T()??""}: ${F()??""}`),x(de,T()),x(k,F())}),p(m,ce)}),u(M),p(S,M)};V(le,S=>{n(o),q(()=>n(o).length===0)?S(Z):S(K,!1)})}u(te),p(s,te),Me(),i()}var qa=z('<div class="header svelte-aryo9e"><div class="title svelte-aryo9e"><!> <span> </span></div></div>'),Va=z('<div class="loading svelte-aryo9e">Loading events...</div>'),Ba=z('<div class="error svelte-aryo9e"> </div>'),Ja=z('<div class="empty svelte-aryo9e">No upcoming events <div class="debug-info" style="font-size: 0.7rem; opacity: 0.5; margin-top: 0.5rem;"> </div></div>'),Ga=z('<span class="time-separator svelte-aryo9e">–</span> ',1),Wa=z('<span class="duration svelte-aryo9e"> </span>'),Ya=z('<div class="event-time svelte-aryo9e"><!> <span> <!></span> <!></div>'),Ka=z('<div class="event-time svelte-aryo9e"><!> <span> </span></div>'),Za=z('<div class="event-location svelte-aryo9e"><!> <span> </span></div>'),Xa=z('<div class="event glass-panel svelte-aryo9e"><div class="event-date-time svelte-aryo9e"><div class="event-date svelte-aryo9e"><!> <span> </span></div> <!></div> <div class="event-title svelte-aryo9e"> </div> <!></div>'),Qa=z('<div class="events-list svelte-aryo9e"></div>'),er=z('<div class="tile calendar glass-panel svelte-aryo9e"><!> <div class="content svelte-aryo9e"><!></div></div>');function tr(s,e){Ie(e,!1);const a=()=>ue(nt,"$connected",i),r=()=>ue(Ae,"$connection",i),[i,o]=Te();let t=L(e,"entityId",8),l=L(e,"label",8,""),c=L(e,"maxEvents",8,5),d=L(e,"daysAhead",8,7),g=L(e,"showTitle",8,!0),v=A([]),_=A(!0),$=A(null),w=null,E=A(!1);async function h(){a()||await new Promise(m=>setTimeout(m,1e3));try{N(_,!0),N($,null);const m=new Date;m.setHours(0,0,0,0);const y=new Date(Date.now()+d()*24*60*60*1e3);y.setHours(23,59,59,999),console.log("Calendar date range:",{start:m.toISOString(),end:y.toISOString(),daysAhead:d()});const T=await Ks(t(),m,y);console.log("Fetched events:",T),console.log("Number of events:",T.length),T.length>0&&console.log("First event:",T[0]),N(v,T.sort((X,H)=>{const F=new Date(X.start?.dateTime||X.start?.date||0),G=new Date(H.start?.dateTime||H.start?.date||0);return F.getTime()-G.getTime()}).slice(0,c())),console.log("Processed events:",n(v).length)}catch(m){const y=m.message||"Failed to load events";N($,y),console.error("Calendar fetch error:",m),console.error("Entity ID:",t()),console.error("Error details:",{message:m.message,stack:m.stack,name:m.name}),N(v,[])}finally{N(_,!1)}}function b(m){const y=m.start?.date||m.start?.dateTime||m.start_time||m.dtstart||m.start;return y?typeof y=="string"&&!y.includes("T")&&!y.includes(" ")&&!!y.match(/^\d{4}-\d{2}-\d{2}$/):!1}function B(m){const y=m.start?.dateTime||m.start?.date||m.start_time||m.dtstart||m.start;if(!y)return console.warn("No start date found in event:",m),"";try{const T=new Date(y);if(isNaN(T.getTime()))return console.warn("Invalid date:",y),"";const X=new Date,H=new Date(X.getFullYear(),X.getMonth(),X.getDate()),F=new Date(T.getFullYear(),T.getMonth(),T.getDate());if(F.getTime()===H.getTime())return"Today";const G=new Date(H);if(G.setDate(G.getDate()+1),F.getTime()===G.getTime())return"Tomorrow";const ce=Math.floor((F.getTime()-H.getTime())/(1e3*60*60*24));return ce>=0&&ce<7?T.toLocaleDateString("en-US",{weekday:"long"}):T.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}catch(T){return console.error("Error formatting date:",T,y),""}}function Q(m){const y=m.start?.dateTime||m.start?.date||m.start_time||m.dtstart||m.start;if(!y)return"";if(b(m))return"All day";try{const T=new Date(y);return isNaN(T.getTime())?"":T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch(T){return console.error("Error formatting time:",T,y),""}}function j(m){const y=m.end?.dateTime||m.end?.date||m.end_time||m.dtend||m.end;if(!y||b(m))return"";try{const T=new Date(y);return isNaN(T.getTime())?"":T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch(T){return console.error("Error formatting end time:",T,y),""}}function te(m){const y=m.start?.dateTime||m.start?.date,T=m.end?.dateTime||m.end?.date;if(!y||!T)return"";const X=new Date(y),F=new Date(T).getTime()-X.getTime(),G=F/(1e3*60*60);return G<1?`${Math.round(F/6e4)}m`:G<24?`${Math.round(G*10)/10}h`:`${Math.round(G/24)}d`}en(()=>{h(),w=setInterval(()=>{N(E,!1),h()},300*1e3)}),Dn(()=>{w&&clearInterval(w)}),U(()=>(a(),r(),n(E)),()=>{a()&&r()&&!n(E)&&(N(E,!0),h())}),Pe(),Ne();var oe=er(),W=f(oe);{var le=m=>{var y=qa(),T=f(y),X=f(T);Kt(X,{size:18});var H=I(X,2),F=f(H,!0);u(H),u(T),u(y),Y(()=>x(F,l()||"Calendar")),p(m,y)};V(W,m=>{g()&&m(le)})}var Z=I(W,2),K=f(Z);{var S=m=>{var y=Va();p(m,y)},M=m=>{var y=R(),T=D(y);{var X=F=>{var G=Ba(),ce=f(G,!0);u(G),Y(()=>x(ce,n($))),p(F,G)},H=F=>{var G=R(),ce=D(G);{var be=ve=>{var de=Ja(),C=I(f(de)),k=f(C);u(C),u(de),Y(()=>x(k,`Events fetched: ${n(v),q(()=>n(v).length)??""}`)),p(ve,de)},we=ve=>{var de=Qa();Ge(de,5,()=>n(v),Je,(C,k)=>{var ne=Xa(),fe=f(ne),Ee=f(fe),_e=f(Ee);Kt(_e,{size:12});var Re=I(_e,2),je=f(Re,!0);u(Re),u(Ee);var We=I(Ee,2);{var rt=ae=>{var he=Ya(),ke=f(he);Zt(ke,{size:12});var ge=I(ke,2),He=f(ge),xe=I(He);{var ft=Se=>{var $e=Ga(),Ye=I(D($e));Y(ot=>x(Ye,` ${ot??""}`),[()=>(n(k),q(()=>j(n(k))))]),p(Se,$e)};V(xe,Se=>{n(k),q(()=>j(n(k)))&&Se(ft)})}u(ge);var $t=I(ge,2);{var wt=Se=>{var $e=Wa(),Ye=f($e);u($e),Y(ot=>x(Ye,`(${ot??""})`),[()=>(n(k),q(()=>te(n(k))))]),p(Se,$e)};V($t,Se=>{n(k),q(()=>te(n(k)))&&Se(wt)})}u(he),Y(Se=>x(He,`${Se??""} `),[()=>(n(k),q(()=>Q(n(k))||"Time TBD"))]),p(ae,he)},O=ae=>{var he=Ka(),ke=f(he);Zt(ke,{size:12});var ge=I(ke,2),He=f(ge,!0);u(ge),u(he),Y(xe=>x(He,xe),[()=>(n(k),q(()=>Q(n(k))||"All day"))]),p(ae,he)};V(We,ae=>{n(k),q(()=>!b(n(k)))?ae(rt):ae(O,!1)})}u(fe);var Oe=I(fe,2),it=f(Oe,!0);u(Oe);var J=I(Oe,2);{var ye=ae=>{var he=Za(),ke=f(he);sa(ke,{size:24});var ge=I(ke,2),He=f(ge,!0);u(ge),u(he),Y(()=>x(He,(n(k),q(()=>n(k).location)))),p(ae,he)};V(J,ae=>{n(k),q(()=>n(k).location)&&ae(ye)})}u(ne),Y(ae=>{x(je,ae),x(it,(n(k),q(()=>n(k).summary||n(k).title||"Untitled Event")))},[()=>(n(k),q(()=>B(n(k))||"Date TBD"))]),p(C,ne)}),u(de),p(ve,de)};V(ce,ve=>{n(v),q(()=>n(v).length===0)?ve(be):ve(we,!1)},!0)}p(F,G)};V(T,F=>{n($)?F(X):F(H,!1)},!0)}p(m,y)};V(K,m=>{n(_)?m(S):m(M,!1)})}u(Z),u(oe),p(s,oe),Me(),o()}var nr=z('<div class="status error svelte-1uha8ag"> </div>'),sr=z("<div> </div>"),ar=z('<div><div class="people"><div class="people-grid svelte-1uha8ag"></div></div></div>'),rr=z('<div class="status-grid-wrapper svelte-1uha8ag"><!></div>'),ir=z('<div class="calendar-tile-wrapper svelte-1uha8ag"><!></div>'),or=z('<section class="section svelte-1uha8ag"><h2 class="svelte-1uha8ag"> </h2> <div class="grid svelte-1uha8ag"></div></section>'),lr=z('<div class="debug-item"><strong> </strong> </div>'),cr=z('<div class="dashboard-container svelte-1uha8ag"><header class="svelte-1uha8ag"><div class="header-left svelte-1uha8ag"><div class="clock svelte-1uha8ag"><span class="time svelte-1uha8ag"> </span> <span class="date svelte-1uha8ag"> </span></div> <div class="status-container svelte-1uha8ag"><!> <button class="master-switch glass-panel svelte-1uha8ag" title="Turn Off All Lights &amp; Plugs"><!> <span>All Off</span></button> <button class="dark-mode-toggle glass-panel svelte-1uha8ag"><!></button></div></div> <!></header> <main><main><!> <section class="section svelte-1uha8ag"><h2 class="svelte-1uha8ag">Debug: Available People</h2> <div class="debug-list svelte-1uha8ag"></div></section></main></main></div>');function yr(s,e){Ie(e,!0);const a=()=>ue(Ae,"$connection",t),r=()=>ue(Ce,"$entities",t),i=()=>ue(Ve,"$connectionError",t),o=()=>ue(nt,"$connected",t),[t,l]=Te();let c=Vt(ns(new Date)),d=me(()=>n(c).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})),g=me(()=>n(c).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})),v=Vt(!1);function _(){N(v,!n(v)),typeof window<"u"&&(localStorage.setItem("darkMode",n(v).toString()),document.documentElement.classList.toggle("dark",n(v)))}en(()=>{Ys();const C=setInterval(()=>{N(c,new Date,!0)},1e3);if(typeof window<"u"){const k=localStorage.getItem("darkMode")==="true";N(v,k),k&&document.documentElement.classList.add("dark")}return()=>clearInterval(C)});function $(){if(!a())return;const C=Object.keys(r()).filter(k=>(k.startsWith("light.")||k.startsWith("switch."))&&r()[k].state==="on");C.length>0&&Ue(a(),"homeassistant","turn_off",{entity_id:C})}const w=[{entityId:"person.artfuldoidger",label:"Mat",batteryEntityId:"sensor.mats_iphone_battery_level"},{entityId:"person.jessi",label:"Jess",batteryEntityId:"sensor.jessi_battery_level"}],E={Security:[{type:"statusGrid",entityIds:["binary_sensor.frontdoor_contact_sensor_contact"],labels:{"binary_sensor.frontdoor_contact_sensor_contact":"Front Door"},deviceClass:"door",showSummary:!1},{type:"arm",entityId:"input_boolean.nighttime_door_warning",label:"Arm Door Sensors"}],Calendar:[{type:"calendar",entityId:"calendar.mat_and_jessi",label:"Upcoming Events",maxEvents:5,daysAhead:1,showTitle:!1}],"Living Room":[{type:"media",entityId:"media_player.living_room_tv",label:"TV"},{type:"switch",entityId:"switch.innr_smart_plug_1",label:"Xmas TreeSmart Plug"}],"Master Bedroom":[{type:"light",entityId:"light.bedroom_lamp",label:"Mat Bedroom Lamp"},{type:"light",entityId:"light.mat_and_jess_light",label:"Mat & Jess Light Strip"},{type:"switch",entityId:"switch.0x0017880108e74ea6",label:"Mat & Jess Smart Plug"},{type:"media",entityId:"media_player.main_bedroom",label:"Apple TV"}],"Kids' Rooms":[{type:"light",entityId:"light.ellies_room",label:"Ellie's Light Bar"},{type:"media",entityId:"media_player.ellie_s_daddy_s_house",label:"Ellie's Yoto",temperatureEntityId:"sensor.ellie_s_daddy_s_house_temperature"},{type:"light",entityId:"light.poppys_light_strip_2",label:"Poppy's Light"},{type:"media",entityId:"media_player.poppy_s_yoto",label:"Poppy's Yoto",temperatureEntityId:"sensor.poppy_s_yoto_temperature"},{type:"light",entityId:"light.bens_bedside_lamp",label:"Ben's Lamp"}],Hallway:[{type:"binary_sensor",entityId:"binary_sensor.frontdoor_contact_sensor_contact",label:"Front Door",deviceClass:"door"},{type:"light",entityId:"light.hallway",label:"Hallway Light"}],Network:[{type:"sensor",entityId:"sensor.ucg_ultra_state",label:"UCG Ultra State"},{type:"sensor",entityId:"sensor.atom",label:"Atom Wifi",unit:"Clients"},{type:"sensor",entityId:"sensor.cerebro",label:"Cerebro Wifi",unit:"Clients"},{type:"sensor",entityId:"sensor.ucg_ultra_ucg_ultra_cpu_temperature",label:"UCG Ultra CPU Temp",unit:"°C"}],"Raspberry Pi Server":[{type:"sensor",entityId:"sensor.system_monitor_last_boot",label:"Last Boot",format:"date"},{type:"sensor",entityId:"sensor.system_monitor_disk_use",label:"Disk Use",unit:"%"},{type:"sensor",entityId:"sensor.system_monitor_disk_free",label:"Disk Free",unit:"GB"},{type:"sensor",entityId:"sensor.system_monitor_processor_temperature",label:"Processor Temp",unit:"°C"}]};var h=cr(),b=f(h),B=f(b),Q=f(B),j=f(Q),te=f(j,!0);u(j);var oe=I(j,2),W=f(oe,!0);u(oe),u(Q);var le=I(Q,2),Z=f(le);{var K=C=>{var k=nr(),ne=f(k,!0);u(k),Y(()=>{vt(k,"title",i()),x(ne,i())}),p(C,k)},S=C=>{var k=sr();let ne;var fe=f(k,!0);u(k),Y(()=>{ne=De(k,1,"status svelte-1uha8ag",null,ne,{connected:o()}),x(fe,o()?"Connected":"Connecting...")}),p(C,k)};V(Z,C=>{i()?C(K):C(S,!1)})}var M=I(Z,2);M.__click=$;var m=f(M);hn(m,{size:20}),ss(2),u(M);var y=I(M,2);y.__click=_;var T=f(y);{var X=C=>{la(C,{size:20})},H=C=>{aa(C,{size:20})};V(T,C=>{n(v)?C(X):C(H,!1)})}u(y),u(le),u(B);var F=I(B,2);{var G=C=>{var k=ar(),ne=f(k),fe=f(ne);Ge(fe,21,()=>w,Je,(Ee,_e)=>{Ia(Ee,{get entityId(){return n(_e).entityId},get label(){return n(_e).label},get batteryEntityId(){return n(_e).batteryEntityId}})}),u(fe),u(ne),u(k),p(C,k)};V(F,C=>{w.length>0&&C(G)})}u(b);var ce=I(b,2),be=f(ce),we=f(be);Ge(we,17,()=>Object.entries(E),Je,(C,k)=>{var ne=me(()=>on(n(k),2));let fe=()=>n(ne)[0],Ee=()=>n(ne)[1];var _e=or(),Re=f(_e),je=f(Re,!0);u(Re);var We=I(Re,2);Ge(We,21,Ee,Je,(rt,O)=>{var Oe=R(),it=D(Oe);{var J=ae=>{fa(ae,{get entityId(){return n(O).entityId},get label(){return n(O).label}})},ye=ae=>{var he=R(),ke=D(he);{var ge=xe=>{ga(xe,{get entityId(){return n(O).entityId},get label(){return n(O).label},get unit(){return n(O).unit},get format(){return n(O).format}})},He=xe=>{var ft=R(),$t=D(ft);{var wt=$e=>{ma($e,{get entityId(){return n(O).entityId},get label(){return n(O).label},get deviceClass(){return n(O).deviceClass}})},Se=$e=>{var Ye=R(),ot=D(Ye);{var _n=Ke=>{ya(Ke,{get entityId(){return n(O).entityId},get label(){return n(O).label}})},mn=Ke=>{var Lt=R(),pn=D(Lt);{var yn=Ze=>{Ca(Ze,{get entityId(){return n(O).entityId},get label(){return n(O).label}})},bn=Ze=>{var Ut=R(),$n=D(Ut);{var wn=Xe=>{xa(Xe,{get entityId(){return n(O).entityId},get label(){return n(O).label}})},kn=Xe=>{var Rt=R(),In=D(Rt);{var Mn=Qe=>{Ta(Qe,{get entityId(){return n(O).entityId},get label(){return n(O).label},get temperatureEntityId(){return n(O).temperatureEntityId}})},En=Qe=>{var jt=R(),Sn=D(jt);{var Tn=et=>{var tt=rr(),kt=f(tt);{let It=me(()=>n(O).entityIds??[]),lt=me(()=>n(O).labels??{}),ct=me(()=>n(O).deviceClass??"door"),Mt=me(()=>n(O).deviceClasses??{}),Et=me(()=>n(O).title??""),St=me(()=>n(O).showSummary??!1),Tt=me(()=>n(O).hideUnavailable??!1),Nt=me(()=>n(O).sortByState??!0);Fa(kt,{get entityIds(){return n(It)},get labels(){return n(lt)},get deviceClass(){return n(ct)},get deviceClasses(){return n(Mt)},get title(){return n(Et)},get showSummary(){return n(St)},get hideUnavailable(){return n(Tt)},get sortByState(){return n(Nt)}})}u(tt),p(et,tt)},Nn=et=>{var tt=R(),kt=D(tt);{var It=lt=>{var ct=ir(),Mt=f(ct);{let Et=me(()=>n(O).label??""),St=me(()=>n(O).maxEvents??5),Tt=me(()=>n(O).daysAhead??7),Nt=me(()=>n(O).showTitle!==void 0?n(O).showTitle:!0);tr(Mt,{get entityId(){return n(O).entityId},get label(){return n(Et)},get maxEvents(){return n(St)},get daysAhead(){return n(Tt)},get showTitle(){return n(Nt)}})}u(ct),p(lt,ct)};V(kt,lt=>{n(O).type==="calendar"&&lt(It)},!0)}p(et,tt)};V(Sn,et=>{n(O).type==="statusGrid"?et(Tn):et(Nn,!1)},!0)}p(Qe,jt)};V(In,Qe=>{n(O).type==="media"?Qe(Mn):Qe(En,!1)},!0)}p(Xe,Rt)};V($n,Xe=>{n(O).type==="automation"?Xe(wn):Xe(kn,!1)},!0)}p(Ze,Ut)};V(pn,Ze=>{n(O).type==="arm"?Ze(yn):Ze(bn,!1)},!0)}p(Ke,Lt)};V(ot,Ke=>{n(O).type==="switch"?Ke(_n):Ke(mn,!1)},!0)}p($e,Ye)};V($t,$e=>{n(O).type==="binary_sensor"?$e(wt):$e(Se,!1)},!0)}p(xe,ft)};V(ke,xe=>{n(O).type==="sensor"?xe(ge):xe(He,!1)},!0)}p(ae,he)};V(it,ae=>{n(O).type==="light"?ae(J):ae(ye,!1)})}p(rt,Oe)}),u(We),u(_e),Y(()=>x(je,fe())),p(C,_e)});var ve=I(we,2),de=I(f(ve),2);Ge(de,5,()=>Object.keys(r()).filter(C=>C.startsWith("light.")||C.startsWith("switch.")||C.startsWith("sensor.ucg")),Je,(C,k)=>{var ne=lr(),fe=f(ne),Ee=f(fe,!0);u(fe);var _e=I(fe);u(ne),Y(()=>{x(Ee,n(k)),x(_e,`: ${r()[n(k)].state??""}`)}),p(C,ne)}),u(de),u(ve),u(be),u(ce),u(h),Y(()=>{x(te,n(d)),x(W,n(g)),vt(y,"title",n(v)?"Switch to Light Mode":"Switch to Dark Mode")}),p(s,h),Me(),l()}An(["click"]);export{yr as component};
